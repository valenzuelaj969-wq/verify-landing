<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VerifyGo® — Safety Simplified</title>

  <!-- Prevent Reader from treating this as an article -->
  <meta property="og:type" content="website">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <style>
    /* Minimal fallback while JS builds the UI */
    html,body{height:100%}
    body{margin:0;display:flex;align-items:center;justify-content:center;background:#0f1214;color:#cfd6db;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Helvetica Neue',Arial,sans-serif}
    .boot {opacity:.7;font-size:14px}
    .hidden {display:none}
  </style>
</head>
<body>
  <div class="boot">Loading VerifyGo®…</div>

  <script type="module">
    // ---- Build styles dynamically so Safari Reader can't strip them ----
    const css = `
      body{background:radial-gradient(circle at center,#1a1d21 0%,#0f1214 100%);color:#e6e6e6}
      .plaque{background:linear-gradient(180deg,#1c232a 0%,#11161b 100%);
        box-shadow:0 60px 90px rgba(0,0,0,.75),0 40px 60px rgba(0,0,0,.55),
                   inset 0 2px 0 rgba(255,255,255,.1),inset 0 -3px 0 rgba(0,0,0,.65),
                   0 0 60px rgba(211,107,45,.33);
        border-radius:18px;padding:40px;max-width:560px;width:92%}
      h1{color:#fff;margin:0 0 10px;font-size:32px;line-height:1.1}
      .lead{color:#cfd6db;margin:0 0 18px}
      .tags{color:#ff9e55;font-weight:700;letter-spacing:1px;margin:8px 0 14px}
      form{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
      input[type=email]{padding:10px 12px;border:none;border-radius:8px;outline:none;width:260px;font-size:1rem}
      button{background:linear-gradient(180deg,#ff9e55 0%,#d36b2d 100%);
        box-shadow:0 14px 20px rgba(211,107,45,.6),inset 0 2px 0 rgba(255,255,255,.32),inset 0 -2px 0 rgba(0,0,0,.42);
        color:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer}
      #toast{position:fixed;bottom:22px;left:50%;transform:translateX(-50%);
        background:#1f262c;color:#fff;padding:10px 14px;border-radius:8px;display:none}
      footer{margin-top:16px;font-size:.85rem;color:#9aa3aa}
    `;
    const styleEl = document.createElement('style');
    styleEl.textContent = css;
    document.head.appendChild(styleEl);

    // ---- Build markup dynamically ----
    const html = `
      <div class="plaque">
        <h1>Safety Simplified. Productivity Amplified.</h1>
        <p class="lead">VerifyGo® keeps your jobsite ready to work—every inspection, permit, and report at your fingertips.</p>
        <div class="tags">BILINGUAL • FIELD-READY • 100% DIGITAL</div>

        <form id="notify-form">
          <input id="email" type="email" name="email" placeholder="Your Email" required />
          <button id="notify-btn" type="submit">Notify Me When Live</button>
        </form>

        <footer>© 2025 VerifyGo® • info@verifygo.pro</footer>
      </div>
      <div id="toast"></div>
    `;
    document.body.innerHTML = html;

    // ---- Supabase (direct client) ----
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

    // Your project (from earlier messages)
    const SUPABASE_URL = 'https://lhmddlywxwbahkdctrb.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxobWRkbHl3eHdiYWtoZGtjdHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMzUyOTYsImV4cCI6MjA3NzYxMTI5Nn0.h3MOi0Znyrz7x3mgBslsVq9HqRZVpTx-4xTDJtnuE1A';

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // UI bits
    const form = document.getElementById('notify-form');
    const emailInput = document.getElementById('email');
    const toast = document.getElementById('toast');

    function showToast(msg){
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(()=> toast.style.display = 'none', 2200);
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = emailInput.value.trim();
      if (!email) return;

      // Ensure table 'leads' exists with columns: email(text), source(text), created_at(timestamptz default now())
      const { error } = await supabase.from('leads').insert([{ email, source: 'website' }]);

      if (error) {
        console.error(error);
        showToast('Save failed. Try again.');
      } else {
        emailInput.value = '';
        showToast('Got it — you’re on the list!');
      }
    });
  </script>
  <noscript>
    <!-- If JS is disabled, tell the user -->
    <div style="padding:20px;color:#fff">Please enable JavaScript to view this site.</div>
  </noscript>
</body>
</html>
